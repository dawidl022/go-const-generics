\documentclass[acmsmall,screen]{acmart}
\usepackage{mathpartir}

\begin{document}

\include{macros}


\begin{figure}
    \begin{mathpar}
        \inferrule
        {(\type~t_A~ [n]t) \in \ov{D}}
        {t = \elementtype(t_A)}


        \inferrule
        {~}
        {\methods(\kw{int}) = \{\}}

    \end{mathpar}
    \caption{FG auxiliary functions for array typing}
\end{figure}


\begin{figure}
    Implements, well-formed type
    \hfill \fbox{$t \imp u$} \qquad \fbox{$t \ok$}
    \begin{mathpar}

        \inferrule[<:$_V$]
        {~}
        {t_V <: t_V}

        \inferrule[<:$_{int}$]
        {~}
        {\kw{int} <: \kw{int}}

        \inferrule[t-named-int]
        {~}
        {\kw{int} \ok}

    \end{mathpar}

    Well-formed type literals
    \hfill \fbox{$T \ok$}
    \begin{mathpar}

        \inferrule[t-array]
        {
            n \ge 0\\
            t \ok
        }
        {[n]t \ok}

    \end{mathpar}

    Well-formed declarations \hfill \fbox{$D \ok$}
    \begin{mathpar}

        \inferrule[t-func-arrayset]
        {
            u = \elementtype(t_A) \\
            t <: u \\
            t_A \ok
        }
        {
            \func~(x~t_A) ~m(x_1~\kw{int},~x_2~t) ~t_A~
            \br{ x[x_1] = x_2;~\return~x }
        }

    \end{mathpar}

    Expressions \hfill \fbox{$\Gamma \vdash e : t$}
    \begin{mathpar}

        \inferrule[t-array-literal]
        {
            t_A \ok \\
            \Gamma \vdash \ov{e : t} \\
            u = \elementtype(t_A) \\
            \ov{t <: u}
        }
        { \Gamma \vdash t_A\br{\ov{e}} : t_A }

        \inferrule[t-int-literal]
        {~}
        { \Gamma \vdash n : \kw{int} }

        \inferrule[t-array-index]
        {
        \Gamma \vdash e_1 : t_A \\
        \Gamma \vdash e_2 : \kw{int} \\
        t = \elementtype(t_A)
        }
        { \Gamma \vdash e_1[e_2] : t }

    \end{mathpar}

    \caption{FG typing for arrays}
\end{figure}
\end{document}
